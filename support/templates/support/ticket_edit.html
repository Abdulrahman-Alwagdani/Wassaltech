{% extends "main/base.html" %}

{% block title %}
    تعديل التذكرة
{% endblock %}

{% block content %}
<div class="flex justify-center items-start min-h-screen py-8 px-4">
    <div class="card bg-base-100 shadow-xl w-full max-w-2xl">
        <div class="card-body">
            {% if messages %}
            <div class="mb-4">
                {% for message in messages %}
                <div class="alert {% if message.tags %}alert-{{ message.tags }}{% endif %}">
                    {{ message }}
                </div>
                {% endfor %}
            </div>
            {% endif %}
            <h1 class="card-title text-3xl font-bold mb-8 text-center">تعديل التذكرة</h1>

            <form method="POST" action="{% url 'support:ticket_edit' ticket.id %}">
                {% csrf_token %}
                <div class="form-control mb-4">
                    <label for="ticket_title" class="label">
                        <span class="label-text text-lg font-semibold">عنوان التذكرة:</span>
                    </label>
                    <input type="text" name="ticket_title" id="ticket_title" value="{{ ticket.ticket_title }}" class="input input-bordered w-full" required>
                </div>
                <div class="form-control mb-4">
                    <label for="ticket_category" class="label">
                        <span class="label-text text-lg font-semibold">فئة التذكرة:</span>
                    </label>
                    <select name="ticket_category" id="ticket_category" class="select select-bordered w-full" required>
                        {% for value, label in ticket_categorys %}
                        <option value="{{ value }}" {% if ticket.ticket_category == value %}selected{% endif %}>{{ label }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="form-control mb-4">
                    <label for="ticket_status" class="label">
                        <span class="label-text text-lg font-semibold">حالة التذكرة:</span>
                    </label>
                    <select name="ticket_status" id="ticket_status" class="select select-bordered w-full" required>
                        {% for value, label in ticket_status %}
                        <option value="{{ value }}" {% if ticket.ticket_status == value %}selected{% endif %}>{{ label }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="form-control mb-4">
                    <label for="ticket_description" class="label">
                        <span class="label-text text-lg font-semibold">وصف التذكرة:</span>
                    </label>
                    <textarea name="ticket_description" id="ticket_description" class="textarea textarea-bordered h-24" required>{{ ticket.ticket_description }}</textarea>
                </div>
                <button type="submit" class="btn btn-primary w-full">تحديث التذكرة</button>
            </form>
        </div>
    </div>
</div>
{% endblock %}
